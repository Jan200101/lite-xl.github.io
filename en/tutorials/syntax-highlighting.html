<!DOCTYPE html>
<html lang="en-US">
  <head>
    <title>Lite XL - Syntax Highlighting</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/svg" href="/assets/img/logo.svg">
    <link rel="stylesheet" href="/assets/stylesheet.css"/>
    <script type='text/javascript' src='/assets/javascript.js'></script>
    <meta name="description" content="A lightweight, simple, fast, feature-filled, and extremely extensible text editor written in C, and Lua, adapted from Lite.">
  </head>
  <body>
    <header>
      <logo>
        <a href='/en'><img class='logo' src='/assets/img/logo.svg'/></a>
        <h2><a href='/en'>Lite XL</a></h2>
      </logo>
      <links>
        <menu>
          <h2>About</h2>
          <items>
            <a href='/en/about/faq'>FAQ</a>
            <a href='/en/about/features'>Features</a>
            <a href='/en/about/screenshots'>Screenshots</a>
            <a href='/en/about/contributors'>Contributors</a>
          </items>
        </menu>
        <menu>
          <h2>Documentation</h2>
          <items>
            <a href='/en/documentation/usage'>Usage</a>
            <a href='/en/documentation/build'>Build</a>
            <a href='/en/documentation/keymap'>Default Keymap</a>
            <a href='/en/documentation/keymap-macos'>MacOS Keymap</a>
          </items>
        </menu>
        <menu>
          <h2>Tutorials</h2>
          <items>
            <a href='/en/tutorials/simple-plugin'>Simple Plugin</a>
            <a href='/en/tutorials/syntax-highlighting'>Syntax Highlighting</a>
            <a href='/en/tutorials/api-overview'>API Overview</a>
            <a href='/en/tutorials/system-fonts'>System Fonts</a>
          </items>
        </menu>
        <h2><a target="_blank" href='https://github.com/lite-xl/lite-xl-plugins'>
          <svg style='top: 2px;' xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="150 100 312 300"><path d="M387.184,12.49c0-6.898-5.592-12.49-12.49-12.49s-12.49,5.592-12.49,12.49c0,36.636,0,73.274,0,109.91 c8.327,0,16.653,0,24.98,0C387.184,85.764,387.184,49.126,387.184,12.49z"/><path d="M249.796,12.49c0-6.898-5.592-12.49-12.49-12.49c-6.898,0-12.49,5.592-12.49,12.49c0,36.636,0,73.274,0,109.91 c8.327,0,16.653,0,24.98,0C249.796,85.764,249.796,49.126,249.796,12.49z"/><path d="M142.384,134.89c0,8.327,0,16.653,0,24.98c6.661,0,13.323,0,19.984,0c0,24.98,0,49.959,0,74.939 c0,79.326,64.306,143.633,143.633,143.633s143.633-64.306,143.633-143.633c0-24.98,0-49.959,0-74.939c6.661,0,13.323,0,19.984,0 c0-8.327,0-16.653,0-24.98C360.539,134.89,251.461,134.89,142.384,134.89z"/><path d="M293.51,390.43c0,73.857,0,147.713,0,221.57c8.327,0,16.653,0,24.98,0c0-73.857,0-147.713,0-221.57 C310.137,391.1,301.863,391.1,293.51,390.43z"/></svg>
          Plugins
        </a></h2>
        <h2><a href='/en/downloads'>
          <svg style='top: 2px;' version="1.1" xmlns="http://www.w3.org/2000/svg" width="12" height="16" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="2.5 0 25 25" style="enable-background:new 0 0 29.978 29.978;" xml:space="preserve"><path d="M25.462,19.105v6.848H4.515v-6.848H0.489v8.861c0,1.111,0.9,2.012,2.016,2.012h24.967c1.115,0,2.016-0.9,2.016-2.012 v-8.861H25.462z"/><path d="M14.62,18.426l-5.764-6.965c0,0-0.877-0.828,0.074-0.828s3.248,0,3.248,0s0-0.557,0-1.416c0-2.449,0-6.906,0-8.723 c0,0-0.129-0.494,0.615-0.494c0.75,0,4.035,0,4.572,0c0.536,0,0.524,0.416,0.524,0.416c0,1.762,0,6.373,0,8.742 c0,0.768,0,1.266,0,1.266s1.842,0,2.998,0c1.154,0,0.285,0.867,0.285,0.867s-4.904,6.51-5.588,7.193 C15.092,18.979,14.62,18.426,14.62,18.426z"/></svg>
          Downloads
        </a></h2>
      </links>
      <expander/>
    </header>
    <content>
      <page id='page-tutorials-syntax-highlighting'>
        <h1 id="syntax-highlighting">Syntax Highlighting</h1>

<h2 id="how-to-create-syntax-highlighting-plugins-for-lite-xl">How to create syntax highlighting plugins for Lite XL</h2>

<p>Syntax highlighting plugins for Lite XL are Lua files. These define some patterns or regular expressions that
match different parts of a given language, assigning token types to each match.
These different token types are then given different colors by your chosen color scheme.</p>

<p>Like other plugins, syntax definitions are sourced from the following folders, in order:</p>

<ul>
<li><code>/usr/share/lite-xl/plugins/</code></li>
<li><code>$HOME/.config/lite-xl/plugins/</code></li>
</ul>

<p>NOTE: The exact location of these folders will depend on your OS and installation method. For example, on Windows, the variable <code>$USERPROFILE</code> will be used instead of <code>$HOME</code>.</p>

<p>The user module folder for Lite XL can generally be found in these places on different OSes:</p>

<ul>
<li>Windows: <code>C:\Users\(username)\.config\lite-xl</code></li>
<li>MacOS: <code>/Users/(usernmame)/.config/lite-xl</code></li>
<li>Linux: <code>/home/(username)/.config/lite-xl</code></li>
</ul>

<p>So, to create a new syntax definition on Linux, you can just create a <code>.lua</code> file in your <code>$HOME/.config/lite-xl/plugins/</code> folder.</p>

<h2 id="what-syntax-token-types-are-supported">What syntax token types are supported?</h2>

<p>The supported syntax token types, defined by <code>lite-xl/core/style.lua</code>, are:</p>

<ul>
<li>normal</li>
<li>symbol</li>
<li>comment</li>
<li>keyword</li>
<li>keyword2</li>
<li>number</li>
<li>literal</li>
<li>string</li>
<li>operator</li>
<li>function</li>
</ul>

<p>In your syntax highlighting plugin, you write patterns to match parts of the language syntax, assigning these token types to matches. You don&#39;t have to use them all - just use as many as you need for your language.</p>

<p>Let&#39;s walk through an example syntax definition and see how this works.</p>

<h2 id="example-syntax-ssh-config-files">Example syntax: ssh config files</h2>

<p>This is a small, simple example of a syntax definition. It&#39;s intended to highlight SSH Config files and looks like this:</p>
<pre><span class="c1">-- mod-version:2 -- lite-xl 2.0</span>
<span class="kd">local</span> <span class="n">syntax</span> <span class="o">=</span> <span class="nb">require</span> <span class="s2">"core.syntax"</span>

<span class="n">syntax</span><span class="p">.</span><span class="n">add</span> <span class="p">{</span>
  <span class="n">files</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"sshd?/?_?config$"</span> <span class="p">},</span>
  <span class="n">comment</span> <span class="o">=</span> <span class="s1">'#'</span><span class="p">,</span>
  <span class="n">patterns</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"#.*\n"</span><span class="p">,</span>        <span class="nb">type</span> <span class="o">=</span> <span class="s2">"comment"</span>  <span class="p">},</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"%d+"</span><span class="p">,</span>          <span class="nb">type</span> <span class="o">=</span> <span class="s2">"number"</span>   <span class="p">},</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"[%a_][%w_]*"</span><span class="p">,</span>  <span class="nb">type</span> <span class="o">=</span> <span class="s2">"symbol"</span>   <span class="p">},</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"@"</span><span class="p">,</span>            <span class="nb">type</span> <span class="o">=</span> <span class="s2">"operator"</span> <span class="p">},</span>
  <span class="p">},</span>
  <span class="n">symbols</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">-- ssh config</span>
    <span class="p">[</span><span class="s2">"Host"</span><span class="p">]</span>                         <span class="o">=</span> <span class="s2">"function"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"ProxyCommand"</span><span class="p">]</span>                 <span class="o">=</span> <span class="s2">"function"</span><span class="p">,</span>

    <span class="p">[</span><span class="s2">"HostName"</span><span class="p">]</span>                     <span class="o">=</span> <span class="s2">"keyword"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"IdentityFile"</span><span class="p">]</span>                 <span class="o">=</span> <span class="s2">"keyword"</span><span class="p">,</span>
    <span class="o">...</span>

    <span class="c1">-- sshd config</span>
    <span class="p">[</span><span class="s2">"Subsystem"</span><span class="p">]</span>                    <span class="o">=</span> <span class="s2">"keyword2"</span><span class="p">,</span>

    <span class="c1">-- Literals</span>
    <span class="p">[</span><span class="s2">"yes"</span><span class="p">]</span>      <span class="o">=</span> <span class="s2">"literal"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"no"</span><span class="p">]</span>       <span class="o">=</span> <span class="s2">"literal"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"any"</span><span class="p">]</span>      <span class="o">=</span> <span class="s2">"literal"</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"ask"</span><span class="p">]</span>      <span class="o">=</span> <span class="s2">"literal"</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>
</pre>
<p>Let&#39;s take each section in turn and see how it works.</p>

<h3 id="header">Header</h3>

<p>The first line is a Lua comment &amp; tells Lite XL which version this plugin requires. The second imports the <code>core.syntax</code> module
for us to use:</p>
<pre><span class="c1">-- mod-version:2 -- lite-xl 2.0</span>
<span class="kd">local</span> <span class="n">syntax</span> <span class="o">=</span> <span class="nb">require</span> <span class="s2">"core.syntax"</span>
</pre>
<p>We then add a syntax definition to lite, using <code>syntax.add {...}</code>. The contents of this definition are covered next.</p>

<h4 id="files">Files</h4>

<p>The <code>files</code> property tells Lite XL which files this syntax should be used for. This is a Lua pattern that matches against the full path of the file being opened. For example, to match against Markdown files - with either a <code>.md</code> or a <code>.markdown</code> extension,
you could do this:</p>
<pre><span class="n">files</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"%.md$"</span><span class="p">,</span> <span class="s2">"%.markdown$"</span> <span class="p">},</span>
</pre>
<p>In our original example, we match against the end of the path rather than the extension, because SSH config files don&#39;t have extensions - and we don&#39;t want to match all <code>config</code> files. We expect the path for SSH config files to look something like one of these:</p>

<ul>
<li><code>~/.ssh/config</code></li>
<li><code>/etc/ssh/ssh_config</code></li>
<li><code>/etc/ssh/sshd_config</code></li>
</ul>

<p>This pattern matches paths that look like that:</p>
<pre><span class="n">files</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"sshd?/?_?config$"</span> <span class="p">},</span>
</pre>
<h3 id="comment">Comment</h3>

<p>The comment property <em>doesn&#39;t</em> define which parts of the syntax are comments - see Patterns for that, below. This property tells Lite XL which character to insert at the start of selected lines when you press <code>ctrl+/</code>.
You can also use <code>block_comment</code> to tell Lite XL how to create multiline / block comments.</p>

<h3 id="patterns">Patterns</h3>

<p>A given piece of text can only match one pattern. Once Lite XL decides that a piece of text matches a pattern, it will assign that token type to that piece and move on.
Patterns are tested in the order that they are written in the syntax definition, so the first match will win.</p>

<p>Each pattern takes one of the following forms:</p>

<h4 id="simple-pattern">Simple Pattern</h4>
<pre><span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"#.*\n"</span><span class="p">,</span>        <span class="nb">type</span> <span class="o">=</span> <span class="s2">"comment"</span> <span class="p">},</span>
</pre>
<p>This form matches the line against the pattern and if it matches, assigns the matching text to the given token <code>type</code> - <code>comment</code>, in this case.</p>

<h4 id="start-end-pattern">Start &amp; End Pattern</h4>
<pre><span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"%["</span><span class="p">,</span> <span class="s2">"%]"</span> <span class="p">},</span> <span class="nb">type</span> <span class="o">=</span> <span class="s2">"keyword"</span> <span class="p">},</span>
</pre>
<p>This form has two patterns - one that matches against the start of the range and one that matches against the end. Everything between the start and the end will be assigned the given token <code>type</code>.</p>

<h4 id="start-end-pattern-with-escape">Start &amp; End Pattern, with Escape</h4>
<pre><span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">'"'</span><span class="p">,</span> <span class="s1">'"'</span><span class="p">,</span> <span class="s1">'</span><span class="se">\</span><span class="s1">'</span> <span class="p">},</span> <span class="nb">type</span> <span class="o">=</span> <span class="s2">"string"</span> <span class="p">},</span>
</pre>
<p>This is the same as the previous form, but with an extra, third parameter.
The 3rd part, the <code>&#39;\&#39;</code> part in this example, specifies the character that allows escaping the closing match.</p>

<p>For more on Lua Patterns, see: <a title='' target='_blank' href='https://www.lua.org/manual/5.3/manual.html#6.4.1'>Lua Pattern Reference</a></p>

<p>If you need to use PCRE Regular Expressions, instead of Lua Patterns, you can use the <code>regex</code> keyword here, instead of <code>pattern</code>.</p>

<h3 id="symbols">Symbols</h3>

<blockquote>
<p>This is <strong>not related to the <code>symbol</code> token type</strong>.</p>
</blockquote>

<p>The symbols section allows you to assign token types to particular keywords or strings - usually reserved words in the language you are highlighting.
The token type in this section <strong>always take precedence</strong> over token types declared in patterns.</p>

<p>For example this highlights <code>Host</code> using the <code>function</code> token type, <code>HostName</code> as a <code>keyword</code> and <code>yes</code>, <code>no</code>, <code>any</code> &amp; <code>ask</code> as a <code>literal</code>:</p>
<pre><span class="p">[</span><span class="s2">"Host"</span><span class="p">]</span>                         <span class="o">=</span> <span class="s2">"function"</span><span class="p">,</span>
<span class="p">[</span><span class="s2">"HostName"</span><span class="p">]</span>                     <span class="o">=</span> <span class="s2">"keyword"</span><span class="p">,</span>

<span class="p">[</span><span class="s2">"yes"</span><span class="p">]</span>      <span class="o">=</span> <span class="s2">"literal"</span><span class="p">,</span>
<span class="p">[</span><span class="s2">"no"</span><span class="p">]</span>       <span class="o">=</span> <span class="s2">"literal"</span><span class="p">,</span>
<span class="p">[</span><span class="s2">"any"</span><span class="p">]</span>      <span class="o">=</span> <span class="s2">"literal"</span><span class="p">,</span>
<span class="p">[</span><span class="s2">"ask"</span><span class="p">]</span>      <span class="o">=</span> <span class="s2">"literal"</span><span class="p">,</span>
</pre>
<h4 id="tips-double-check-your-patterns">Tips: double check your patterns!</h4>

<p>There are a few common mistakes that can be made when using the <code>symbols</code> table in conjunction with patterns.</p>

<h5 id="case-1-spaces-between-two-symbols-tokens">Case 1: Spaces between two <code>symbols</code> tokens</h5>

<p>Let&#39;s have an example:</p>
<pre><span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"[%a_][%w_]+%s+()[%a_][%w_]+"</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"keyword2"</span><span class="p">,</span> <span class="s2">"symbol"</span> <span class="p">}</span> <span class="p">}</span>
</pre>
<p>Let&#39;s explain the pattern a bit (omitting the empty parentheses):</p>
<pre><span class="o">[</span>%a_] <span class="o">=</span> any alphabet and underscore
<span class="o">[</span>%w_] <span class="o">=</span> any alphabet, numbers and underscore
%s <span class="o">=</span> any whitespace character

WORD <span class="o">=</span>
  <span class="o">[</span>%a_] followed by <span class="o">(</span>1 or more <span class="o">[</span>%w_]<span class="o">)</span>

pattern <span class="o">=</span>
  WORD followed by <span class="o">(</span>one or more %s<span class="o">)</span> followed by WORD
</pre>
<p>Afterwards, you add an entry <code>[&quot;my&quot;] = &quot;literal&quot;</code> in the <code>symbols</code> table.
You test the syntax with <code>my function</code> found that <code>&quot;my&quot;</code> isn&#39;t highlighted as <code>literal</code>. Why did that happen?</p>

<p><strong><code>symbols</code> table requires an exact match</strong>.
If you look carefully, the empty parentheses (<code>()</code>) is placed <strong>after the space</strong>!
This tells Lite XL that <code>WORD followed by (one or more %s)</code> is a token, which will match <code>my</code> (note the space in the match).</p>

<p>The fix is to add a <code>normal</code> token for the whitespace between the two tokens:</p>
<pre><span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"[%a_][%w_]+()%s+()[%a_][%w_]+"</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"keyword2"</span><span class="p">,</span> <span class="s2">"normal"</span><span class="p">,</span> <span class="s2">"symbol"</span> <span class="p">}</span> <span class="p">}</span>
</pre>
<h5 id="case-2-patterns-symbols-tokens">Case 2: Patterns &amp; <code>symbols</code> tokens</h5>

<p>One might assume that Lite XL magically matches text against the <code>symbols</code> table. This is not the case.</p>

<p>In some languages, people may add a generic pattern to delegate the matching to the <code>symbols</code> table.</p>
<pre><span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"[%a_][%w_]*"</span><span class="p">,</span> <span class="s2">"symbol"</span> <span class="p">}</span>
</pre>
<p>However, the <code>symbols</code> table may look like this:</p>
<pre><span class="n">symbols</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">[</span><span class="s2">"my-symbol"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"function"</span><span class="p">,</span>
  <span class="p">[</span><span class="s2">"..something_else"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"literal"</span>
<span class="p">}</span>
</pre>
<p><code>&quot;my-symbol</code> contains a dash (<code>-</code>) and <code>&quot;..something_else&quot;</code> contains 2 dots (<code>.</code>).
None of the characters are matched by <code>[%a_][%w_]*</code>!</p>

<p><strong>Beware of the text you intend to match in the <code>symbols</code> table.</strong>
<strong>If you want to use it, you need to ensure that it can matched by one of the patterns.</strong></p>

<p>The correct patterns are:</p>
<pre><span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"[%a_][%w%-_]*"</span><span class="p">,</span> <span class="s2">"symbol"</span> <span class="p">},</span>
<span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"%.%.[%a_][%w_]*"</span><span class="p">,</span> <span class="s2">"symbol"</span> <span class="p">},</span>
</pre>
<h2 id="testing-your-new-syntax">Testing Your New Syntax</h2>

<p>To test your new syntax highlighting you need to do two things:</p>

<ul>
<li>Reload the Lite XL core</li>
<li>Load a file in your chosen language and see how it looks</li>
</ul>

<p>To reload the core, you can either restart Lite XL, or reload the core from the command palette, without needing to restart.
To do this, type <code>ctrl+shit+p</code> to show the command palette, then select <code>Core: Restart</code> (or type <code>crr</code> or something similar to match it), then press Enter. You will need to restart the core after any changes you make to the syntax highlighting definition.</p>

<h2 id="example-advanced-syntax-markdown">Example advanced syntax: Markdown</h2>

<blockquote>
<p><strong>Note: This example has features from 2.1. It is not compatible with older versions of lite-xl.</strong></p>
</blockquote>

<p>Not all languages are as simple as SSH config files. Markup languages like HTML and Markdown are especially hard to parse correctly. Here&#39;s the markdown syntax file in its full glory:</p>
<pre><span class="c1">-- mod-version:3</span>
<span class="kd">local</span> <span class="n">syntax</span> <span class="o">=</span> <span class="nb">require</span> <span class="s2">"core.syntax"</span>
<span class="kd">local</span> <span class="n">style</span> <span class="o">=</span> <span class="nb">require</span> <span class="s2">"core.style"</span>
<span class="kd">local</span> <span class="n">core</span> <span class="o">=</span> <span class="nb">require</span> <span class="s2">"core"</span>

<span class="kd">local</span> <span class="n">initial_color</span> <span class="o">=</span> <span class="n">style</span><span class="p">.</span><span class="n">syntax</span><span class="p">[</span><span class="s2">"keyword2"</span><span class="p">]</span>

<span class="c1">-- Add 3 type of font styles for use on markdown files</span>
<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">attr</span> <span class="k">in</span> <span class="nb">pairs</span><span class="p">({</span><span class="s2">"bold"</span><span class="p">,</span> <span class="s2">"italic"</span><span class="p">,</span> <span class="s2">"bold_italic"</span><span class="p">})</span> <span class="k">do</span>
  <span class="kd">local</span> <span class="n">attributes</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="k">if</span> <span class="n">attr</span> <span class="o">~=</span> <span class="s2">"bold_italic"</span> <span class="k">then</span>
    <span class="n">attributes</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span>
  <span class="k">else</span>
    <span class="n">attributes</span><span class="p">[</span><span class="s2">"bold"</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="n">attributes</span><span class="p">[</span><span class="s2">"italic"</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span>
  <span class="k">end</span>
  <span class="c1">-- no way to copy user custom font with additional attributes :(</span>
  <span class="n">style</span><span class="p">.</span><span class="n">syntax_fonts</span><span class="p">[</span><span class="s2">"markdown_"</span><span class="o">..</span><span class="n">attr</span><span class="p">]</span> <span class="o">=</span> <span class="n">renderer</span><span class="p">.</span><span class="n">font</span><span class="p">.</span><span class="nb">load</span><span class="p">(</span>
    <span class="n">DATADIR</span> <span class="o">..</span> <span class="s2">"/fonts/JetBrainsMono-Regular.ttf"</span><span class="p">,</span>
    <span class="n">style</span><span class="p">.</span><span class="n">code_font</span><span class="p">:</span><span class="n">get_size</span><span class="p">(),</span>
    <span class="n">attributes</span>
  <span class="p">)</span>
  <span class="c1">-- also add a color for it</span>
  <span class="n">style</span><span class="p">.</span><span class="n">syntax</span><span class="p">[</span><span class="s2">"markdown_"</span><span class="o">..</span><span class="n">attr</span><span class="p">]</span> <span class="o">=</span> <span class="n">style</span><span class="p">.</span><span class="n">syntax</span><span class="p">[</span><span class="s2">"keyword2"</span><span class="p">]</span>
<span class="k">end</span>

<span class="kd">local</span> <span class="n">in_squares_match</span> <span class="o">=</span> <span class="s2">"^%[%]"</span>
<span class="kd">local</span> <span class="n">in_parenthesis_match</span> <span class="o">=</span> <span class="s2">"^%(%)"</span>

<span class="n">syntax</span><span class="p">.</span><span class="n">add</span> <span class="p">{</span>
  <span class="n">name</span> <span class="o">=</span> <span class="s2">"Markdown"</span><span class="p">,</span>
  <span class="n">files</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"%.md$"</span><span class="p">,</span> <span class="s2">"%.markdown$"</span> <span class="p">},</span>
  <span class="n">block_comment</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"&lt;!--"</span><span class="p">,</span> <span class="s2">"--&gt;"</span> <span class="p">},</span>
  <span class="n">space_handling</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">-- turn off this feature to handle it our selfs</span>
  <span class="n">patterns</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">---- Place patterns that require spaces at start to optimize matching speed</span>
  <span class="c1">---- and apply the %s+ optimization immediately afterwards</span>
    <span class="c1">-- bullets</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"^%s*%*%s"</span><span class="p">,</span>                 <span class="nb">type</span> <span class="o">=</span> <span class="s2">"number"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"^%s*%-%s"</span><span class="p">,</span>                 <span class="nb">type</span> <span class="o">=</span> <span class="s2">"number"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"^%s*%+%s"</span><span class="p">,</span>                 <span class="nb">type</span> <span class="o">=</span> <span class="s2">"number"</span> <span class="p">},</span>
    <span class="c1">-- numbered bullet</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"^%s*[0-9]+[%.%)]%s"</span><span class="p">,</span>       <span class="nb">type</span> <span class="o">=</span> <span class="s2">"number"</span> <span class="p">},</span>
    <span class="c1">-- blockquote</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"^%s*&gt;+%s"</span><span class="p">,</span>                 <span class="nb">type</span> <span class="o">=</span> <span class="s2">"string"</span> <span class="p">},</span>
    <span class="c1">-- alternative bold italic formats</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"%s___"</span><span class="p">,</span> <span class="s2">"___%f[%s]"</span> <span class="p">},</span>   <span class="nb">type</span> <span class="o">=</span> <span class="s2">"markdown_bold_italic"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"%s__"</span><span class="p">,</span> <span class="s2">"__%f[%s]"</span> <span class="p">},</span>     <span class="nb">type</span> <span class="o">=</span> <span class="s2">"markdown_bold"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"%s_[%S]"</span><span class="p">,</span> <span class="s2">"_%f[%s]"</span> <span class="p">},</span>   <span class="nb">type</span> <span class="o">=</span> <span class="s2">"markdown_italic"</span> <span class="p">},</span>
    <span class="c1">-- reference links</span>
    <span class="p">{</span>
      <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"^%s*%[%^()["</span><span class="o">..</span><span class="n">in_squares_match</span><span class="o">..</span><span class="s2">"]+()%]: "</span><span class="p">,</span>
      <span class="nb">type</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"function"</span><span class="p">,</span> <span class="s2">"number"</span><span class="p">,</span> <span class="s2">"function"</span> <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"^%s*%[%^?()["</span><span class="o">..</span><span class="n">in_squares_match</span><span class="o">..</span><span class="s2">"]+()%]:%s+.+\n"</span><span class="p">,</span>
      <span class="nb">type</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"function"</span><span class="p">,</span> <span class="s2">"number"</span><span class="p">,</span> <span class="s2">"function"</span> <span class="p">}</span>
    <span class="p">},</span>
    <span class="c1">-- optimization</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"%s+"</span><span class="p">,</span>                      <span class="nb">type</span> <span class="o">=</span> <span class="s2">"normal"</span> <span class="p">},</span>

  <span class="c1">---- HTML rules imported and adapted from language_html</span>
  <span class="c1">---- to not conflict with markdown rules</span>
    <span class="c1">-- Inline JS and CSS</span>
    <span class="p">{</span>
      <span class="n">pattern</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s2">"&lt;%s*[sS][cC][rR][iI][pP][tT]%s+[tT][yY][pP][eE]%s*=%s*"</span> <span class="o">..</span>
        <span class="s2">"['\"</span><span class="p">]</span><span class="o">%</span><span class="n">a</span><span class="o">+/</span><span class="p">[</span><span class="n">jJ</span><span class="p">][</span><span class="n">aA</span><span class="p">][</span><span class="n">vV</span><span class="p">][</span><span class="n">aA</span><span class="p">][</span><span class="n">sS</span><span class="p">][</span><span class="n">cC</span><span class="p">][</span><span class="n">rR</span><span class="p">][</span><span class="n">iI</span><span class="p">][</span><span class="n">pP</span><span class="p">][</span><span class="n">tT</span><span class="p">][</span><span class="s1">'</span><span class="se">\"</span><span class="s1">]%s*&gt;",
      "&lt;%s*/[sS][cC][rR][iI][pP][tT]&gt;"
      },
      syntax = ".js",
      type = "function"
    },
    {
      pattern = {
      "&lt;%s*[sS][cC][rR][iI][pP][tT]%s*&gt;",
      "&lt;%s*/%s*[sS][cC][rR][iI][pP][tT]&gt;"
      },
      syntax = ".js",
      type = "function"
    },
    {
      pattern = {
      "&lt;%s*[sS][tT][yY][lL][eE][^&gt;]*&gt;",
      "&lt;%s*/%s*[sS][tT][yY][lL][eE]%s*&gt;"
      },
      syntax = ".css",
      type = "function"
    },
    -- Comments
    { pattern = { "&lt;!%-%-", "%-%-&gt;" },   type = "comment" },
    -- Tags
    { pattern = "%f[^&lt;]![%a_][%w_]*",    type = "keyword2" },
    { pattern = "%f[^&lt;][%a_][%w_]*",     type = "function" },
    { pattern = "%f[^&lt;]/[%a_][%w_]*",    type = "function" },
    -- Attributes
    {
      pattern = "[a-z%-]+%s*()=%s*()\".-\"",
      type = { "keyword", "operator", "string" }
    },
    {
      pattern = "[a-z%-]+%s*()=%s*()'</span><span class="p">.</span><span class="o">-</span><span class="s1">'",
      type = { "keyword", "operator", "string" }
    },
    {
      pattern = "[a-z%-]+%s*()=%s*()%-?%d[%d%.]*",
      type = { "keyword", "operator", "number" }
    },
    -- Entities
    { pattern = "&amp;#?[a-zA-Z0-9]+;",         type = "keyword2" },

  ---- Markdown rules
    -- math
    { pattern = { "%$%$", "%$%$", "\"  },  type = "string", syntax = ".tex"},
    { pattern = { "%$", "%$", "\" },       type = "string", syntax = ".tex"},
    -- code blocks
    { pattern = { "```c++", "```" },        type = "string", syntax = ".cpp" },
    -- ... there'</span><span class="n">s</span> <span class="n">some</span> <span class="n">other</span> <span class="n">patterns</span> <span class="n">here</span><span class="p">,</span> <span class="n">but</span> <span class="n">I</span> <span class="n">removed</span> <span class="n">them</span> <span class="k">for</span> <span class="n">brevity</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"```lobster"</span><span class="p">,</span> <span class="s2">"```"</span> <span class="p">},</span>    <span class="nb">type</span> <span class="o">=</span> <span class="s2">"string"</span><span class="p">,</span> <span class="n">syntax</span> <span class="o">=</span> <span class="s2">".lobster"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"```"</span><span class="p">,</span> <span class="s2">"```"</span> <span class="p">},</span>           <span class="nb">type</span> <span class="o">=</span> <span class="s2">"string"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"``"</span><span class="p">,</span> <span class="s2">"``"</span> <span class="p">},</span>             <span class="nb">type</span> <span class="o">=</span> <span class="s2">"string"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"%f[\`]%`[%S]"</span><span class="p">,</span> <span class="s2">"`"</span> <span class="p">},</span>   <span class="nb">type</span> <span class="o">=</span> <span class="s2">"string"</span> <span class="p">},</span>
    <span class="c1">-- strike</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"~~"</span><span class="p">,</span> <span class="s2">"~~"</span> <span class="p">},</span>             <span class="nb">type</span> <span class="o">=</span> <span class="s2">"keyword2"</span> <span class="p">},</span>
    <span class="c1">-- highlight</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"=="</span><span class="p">,</span> <span class="s2">"=="</span> <span class="p">},</span>             <span class="nb">type</span> <span class="o">=</span> <span class="s2">"literal"</span> <span class="p">},</span>
    <span class="c1">-- lines</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"^%-%-%-+\n"</span><span class="p">,</span>               <span class="nb">type</span> <span class="o">=</span> <span class="s2">"comment"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"^%*%*%*+\n"</span><span class="p">,</span>               <span class="nb">type</span> <span class="o">=</span> <span class="s2">"comment"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"^___+\n"</span><span class="p">,</span>                  <span class="nb">type</span> <span class="o">=</span> <span class="s2">"comment"</span> <span class="p">},</span>
    <span class="c1">-- bold and italic</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"%*%*%*%S"</span><span class="p">,</span> <span class="s2">"%*%*%*"</span> <span class="p">},</span>   <span class="nb">type</span> <span class="o">=</span> <span class="s2">"markdown_bold_italic"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"%*%*%S"</span><span class="p">,</span> <span class="s2">"%*%*"</span> <span class="p">},</span>       <span class="nb">type</span> <span class="o">=</span> <span class="s2">"markdown_bold"</span> <span class="p">},</span>
    <span class="c1">-- handle edge case where asterisk can be at end of line and not close</span>
    <span class="p">{</span>
      <span class="n">pattern</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"%f[\%*]%*[%S]"</span><span class="p">,</span> <span class="s2">"%*%f[^%*]"</span> <span class="p">},</span>
      <span class="nb">type</span> <span class="o">=</span> <span class="s2">"markdown_italic"</span>
    <span class="p">},</span>
    <span class="c1">-- alternative bold italic formats</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"^___[%s%p%w]+___%s"</span> <span class="p">,</span>      <span class="nb">type</span> <span class="o">=</span> <span class="s2">"markdown_bold_italic"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"^__[%s%p%w]+__%s"</span> <span class="p">,</span>        <span class="nb">type</span> <span class="o">=</span> <span class="s2">"markdown_bold"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"^_[%s%p%w]+_%s"</span> <span class="p">,</span>          <span class="nb">type</span> <span class="o">=</span> <span class="s2">"markdown_italic"</span> <span class="p">},</span>
    <span class="c1">-- heading with custom id</span>
    <span class="p">{</span>
      <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"^#+%s[%w%s%p]+(){()#[%w%-]+()}"</span><span class="p">,</span>
      <span class="nb">type</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"keyword"</span><span class="p">,</span> <span class="s2">"function"</span><span class="p">,</span> <span class="s2">"string"</span><span class="p">,</span> <span class="s2">"function"</span> <span class="p">}</span>
    <span class="p">},</span>
    <span class="c1">-- headings</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"^#+%s.+\n"</span><span class="p">,</span>                <span class="nb">type</span> <span class="o">=</span> <span class="s2">"keyword"</span> <span class="p">},</span>
    <span class="c1">-- superscript and subscript</span>
    <span class="p">{</span>
      <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"%^()%d+()%^"</span><span class="p">,</span>
      <span class="nb">type</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"function"</span><span class="p">,</span> <span class="s2">"number"</span><span class="p">,</span> <span class="s2">"function"</span> <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"%~()%d+()%~"</span><span class="p">,</span>
      <span class="nb">type</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"function"</span><span class="p">,</span> <span class="s2">"number"</span><span class="p">,</span> <span class="s2">"function"</span> <span class="p">}</span>
    <span class="p">},</span>
    <span class="c1">-- definitions</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"^:%s.+"</span><span class="p">,</span>                   <span class="nb">type</span> <span class="o">=</span> <span class="s2">"function"</span> <span class="p">},</span>
    <span class="c1">-- emoji</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">":[a-zA-Z0-9_%-]+:"</span><span class="p">,</span>        <span class="nb">type</span> <span class="o">=</span> <span class="s2">"literal"</span> <span class="p">},</span>
    <span class="c1">-- images and link</span>
    <span class="p">{</span>
      <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"!?%[!?%[()["</span><span class="o">..</span><span class="n">in_squares_match</span><span class="o">..</span><span class="s2">"]+()%]%(()["</span><span class="o">..</span><span class="n">in_parenthesis_match</span><span class="o">..</span><span class="s2">"]+()%)%]%(()["</span><span class="o">..</span><span class="n">in_parenthesis_match</span><span class="o">..</span><span class="s2">"]+()%)"</span><span class="p">,</span>
      <span class="nb">type</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"function"</span><span class="p">,</span> <span class="s2">"string"</span><span class="p">,</span> <span class="s2">"function"</span><span class="p">,</span> <span class="s2">"number"</span><span class="p">,</span> <span class="s2">"function"</span><span class="p">,</span> <span class="s2">"number"</span><span class="p">,</span> <span class="s2">"function"</span> <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"!?%[!?%[?()["</span><span class="o">..</span><span class="n">in_squares_match</span><span class="o">..</span><span class="s2">"]+()%]?%]%(()["</span><span class="o">..</span><span class="n">in_parenthesis_match</span><span class="o">..</span><span class="s2">"]+()%)"</span><span class="p">,</span>
      <span class="nb">type</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"function"</span><span class="p">,</span> <span class="s2">"string"</span><span class="p">,</span> <span class="s2">"function"</span><span class="p">,</span> <span class="s2">"number"</span><span class="p">,</span> <span class="s2">"function"</span> <span class="p">}</span>
    <span class="p">},</span>
    <span class="c1">-- reference links</span>
    <span class="p">{</span>
      <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"%[()["</span><span class="o">..</span><span class="n">in_squares_match</span><span class="o">..</span><span class="s2">"]+()%] *()%[()["</span><span class="o">..</span><span class="n">in_squares_match</span><span class="o">..</span><span class="s2">"]+()%]"</span><span class="p">,</span>
      <span class="nb">type</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"function"</span><span class="p">,</span> <span class="s2">"string"</span><span class="p">,</span> <span class="s2">"function"</span><span class="p">,</span> <span class="s2">"function"</span><span class="p">,</span> <span class="s2">"number"</span><span class="p">,</span> <span class="s2">"function"</span> <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"!?%[%^?()["</span><span class="o">..</span><span class="n">in_squares_match</span><span class="o">..</span><span class="s2">"]+()%]"</span><span class="p">,</span>
      <span class="nb">type</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"function"</span><span class="p">,</span> <span class="s2">"number"</span><span class="p">,</span> <span class="s2">"function"</span> <span class="p">}</span>
    <span class="p">},</span>
    <span class="c1">-- url's and email</span>
    <span class="p">{</span>
      <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"&lt;[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+%.[a-zA-Z0-9-.]+&gt;"</span><span class="p">,</span>
      <span class="nb">type</span> <span class="o">=</span> <span class="s2">"function"</span>
    <span class="p">},</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"&lt;https?://%S+&gt;"</span><span class="p">,</span>           <span class="nb">type</span> <span class="o">=</span> <span class="s2">"function"</span> <span class="p">},</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"https?://%S+"</span><span class="p">,</span>             <span class="nb">type</span> <span class="o">=</span> <span class="s2">"function"</span> <span class="p">},</span>
    <span class="c1">-- optimize consecutive dashes used in tables</span>
    <span class="p">{</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"%-+"</span><span class="p">,</span>                      <span class="nb">type</span> <span class="o">=</span> <span class="s2">"normal"</span> <span class="p">},</span>
  <span class="p">},</span>
  <span class="n">symbols</span> <span class="o">=</span> <span class="p">{</span> <span class="p">},</span>
<span class="p">}</span>

<span class="c1">-- Adjust the color on theme changes</span>
<span class="n">core</span><span class="p">.</span><span class="n">add_thread</span><span class="p">(</span><span class="k">function</span><span class="p">()</span>
  <span class="k">while</span> <span class="kc">true</span> <span class="k">do</span>
    <span class="k">if</span> <span class="n">initial_color</span> <span class="o">~=</span> <span class="n">style</span><span class="p">.</span><span class="n">syntax</span><span class="p">[</span><span class="s2">"keyword2"</span><span class="p">]</span> <span class="k">then</span>
      <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">attr</span> <span class="k">in</span> <span class="nb">pairs</span><span class="p">({</span><span class="s2">"bold"</span><span class="p">,</span> <span class="s2">"italic"</span><span class="p">,</span> <span class="s2">"bold_italic"</span><span class="p">})</span> <span class="k">do</span>
        <span class="n">style</span><span class="p">.</span><span class="n">syntax</span><span class="p">[</span><span class="s2">"markdown_"</span><span class="o">..</span><span class="n">attr</span><span class="p">]</span> <span class="o">=</span> <span class="n">style</span><span class="p">.</span><span class="n">syntax</span><span class="p">[</span><span class="s2">"keyword2"</span><span class="p">]</span>
      <span class="k">end</span>
      <span class="n">initial_color</span> <span class="o">=</span> <span class="n">style</span><span class="p">.</span><span class="n">syntax</span><span class="p">[</span><span class="s2">"keyword2"</span><span class="p">]</span>
    <span class="k">end</span>
    <span class="nb">coroutine.yield</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span><span class="p">)</span>
</pre>
<h3 id="syntax-fonts-since-1-16-10">Syntax fonts (Since 1.16.10)</h3>

<p>The syntax allows users to set different font styles (bold, italic, etc.) for different patterns.
To change the font style of a token, add a Font to <code>style.syntax_fonts[token_type]</code>.
For example:
<code>
-- will ensure every &quot;fancysyntax_fancy_token&quot; is italic
style.syntax_fonts[&quot;fancysyntax_fancy_token&quot;] = renderer.font.load(&quot;myfont.ttf&quot;, 14 * SCALE, { italic = true })
</code></p>

<p>The markdown example automates this with a for loop.</p>

<p>The limitations here are that fonts cannot be copied with different attributes, thus the font path has to be hardcoded.
Other than that, abusing <code>style.syntax_fonts</code> may lead to <strong>slow performance</strong> and <strong>high memory consumption</strong>.
This is very obvious when the user tries to resize the editor with <code>ctrl-scroll</code> or <code>ctrl+</code> and <code>ctrl-</code>.
Please use it in moderation.</p>

<h3 id="space-handling-v2-1-upcoming-master">Space handling (v2.1 (upcoming) / <code>master</code>)</h3>

<p>By default, Lite XL prepends a pattern <code>{ pattern = &quot;%s+&quot;, type = &quot;normal&quot; }</code> to the syntax.
This improves the performance drastically on lines that starts with whitespaces (eg. heavily indented lines)
by matching the whitespace before other patterns in order to prevent Lite XL from iterating the entire syntax.
However, there may be syntaxes that require matching spaces (eg. Markdown with indented blocks)
so this can be disabled by setting <code>space_handling</code> to <code>false.</code></p>

<blockquote>
<p>To keep the space handling optimization or to support older versions of Lite XL,
<code>{ pattern = &quot;%s+&quot;, type = &quot;normal&quot; }</code> can be added after patterns that require space.</p>
</blockquote>

<h3 id="simple-patterns-with-multiple-tokens-v1-16-10">Simple patterns with multiple tokens (v1.16.10)</h3>

<p>This is an excerpt taken from the markdown plugin:</p>
<pre><span class="kd">local</span> <span class="n">in_squares_match</span> <span class="o">=</span> <span class="s2">"^%[%]"</span>
<span class="c1">-- reference links</span>
<span class="p">{</span>
  <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"^%s*%[%^()["</span><span class="o">..</span><span class="n">in_squares_match</span><span class="o">..</span><span class="s2">"]+()%]: "</span><span class="p">,</span>
  <span class="nb">type</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"function"</span><span class="p">,</span> <span class="s2">"number"</span><span class="p">,</span> <span class="s2">"function"</span> <span class="p">}</span>
<span class="p">},</span>
</pre>
<p>Sometimes it makes sense to highlight different parts of a pattern differently.
An empty parentheses (<code>()</code>) in Lua patterns will return the position of the text in the parentheses.
This will tell Lite XL when to change the type of token.
For instance, <code>^%s*%[%^</code> is <code>&quot;function&quot;</code>, <code>[&quot;..in_squares_match..&quot;]+</code> is <code>&quot;number&quot;</code> and <code>%]:</code> is <code>&quot;function&quot;</code>.</p>

<h3 id="subsyntaxes-since-v1-16-10">Subsyntaxes (Since v1.16.10)</h3>

<p>Lite XL supports embedding another syntax into the existing syntax.
This is used to support code blocks inside the markdown syntax.</p>

<p>For example:
<code>lua
{ pattern = { &quot;</code>cpp&quot;, &quot;<code>&quot; },        type = &quot;string&quot;, syntax = &quot;.cpp&quot; },
</code></p>

<p>This would highlight <code></code><code>cpp</code><code>and</code><code></code><code></code> with <code>&quot;string&quot;</code> while everything inside them will be highlighted with a syntax that matches <code>&quot;.cpp&quot;</code>.</p>

      </page>
      <sidebar>
        <box>
          <h2>Get Involved</h2>
          <a target='_blank' href='https://github.com/lite-xl/lite-xl'>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
            Github
          </a>
          <a target='_blank' href='https://discord.gg/RWzqC3nx7K'>
            <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 40" width="16" height="20"><path d="M 41.625 10.769531 C 37.644531 7.566406 31.347656 7.023438 31.078125 7.003906 C 30.660156 6.96875 30.261719 7.203125 30.089844 7.589844 C 30.074219 7.613281 29.9375 7.929688 29.785156 8.421875 C 32.417969 8.867188 35.652344 9.761719 38.578125 11.578125 C 39.046875 11.867188 39.191406 12.484375 38.902344 12.953125 C 38.710938 13.261719 38.386719 13.429688 38.050781 13.429688 C 37.871094 13.429688 37.6875 13.378906 37.523438 13.277344 C 32.492188 10.15625 26.210938 10 25 10 C 23.789063 10 17.503906 10.15625 12.476563 13.277344 C 12.007813 13.570313 11.390625 13.425781 11.101563 12.957031 C 10.808594 12.484375 10.953125 11.871094 11.421875 11.578125 C 14.347656 9.765625 17.582031 8.867188 20.214844 8.425781 C 20.0625 7.929688 19.925781 7.617188 19.914063 7.589844 C 19.738281 7.203125 19.34375 6.960938 18.921875 7.003906 C 18.652344 7.023438 12.355469 7.566406 8.320313 10.8125 C 6.214844 12.761719 2 24.152344 2 34 C 2 34.175781 2.046875 34.34375 2.132813 34.496094 C 5.039063 39.605469 12.972656 40.941406 14.78125 41 C 14.789063 41 14.800781 41 14.8125 41 C 15.132813 41 15.433594 40.847656 15.621094 40.589844 L 17.449219 38.074219 C 12.515625 36.800781 9.996094 34.636719 9.851563 34.507813 C 9.4375 34.144531 9.398438 33.511719 9.765625 33.097656 C 10.128906 32.683594 10.761719 32.644531 11.175781 33.007813 C 11.234375 33.0625 15.875 37 25 37 C 34.140625 37 38.78125 33.046875 38.828125 33.007813 C 39.242188 32.648438 39.871094 32.683594 40.238281 33.101563 C 40.601563 33.515625 40.5625 34.144531 40.148438 34.507813 C 40.003906 34.636719 37.484375 36.800781 32.550781 38.074219 L 34.378906 40.589844 C 34.566406 40.847656 34.867188 41 35.1875 41 C 35.199219 41 35.210938 41 35.21875 41 C 37.027344 40.941406 44.960938 39.605469 47.867188 34.496094 C 47.953125 34.34375 48 34.175781 48 34 C 48 24.152344 43.785156 12.761719 41.625 10.769531 Z M 18.5 30 C 16.566406 30 15 28.210938 15 26 C 15 23.789063 16.566406 22 18.5 22 C 20.433594 22 22 23.789063 22 26 C 22 28.210938 20.433594 30 18.5 30 Z M 31.5 30 C 29.566406 30 28 28.210938 28 26 C 28 23.789063 29.566406 22 31.5 22 C 33.433594 22 35 23.789063 35 26 C 35 28.210938 33.433594 30 31.5 30 Z"/></svg>
            Discord
          </a>
          <a target='_blank' href='https://matrix.to/#/#lite-xl:matrix.org'>
            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16px" height="16px" viewBox="0 0 520 520" style="enable-background:new 0 0 520 520;" xml:space="preserve"><path d="M13.7,11.9v496.2h35.7V520H0V0h49.4v11.9H13.7z"/><path d="M166.3,169.2v25.1h0.7c6.7-9.6,14.8-17,24.2-22.2c9.4-5.3,20.3-7.9,32.5-7.9c11.7,0,22.4,2.3,32.1,6.8c9.7,4.5,17,12.6,22.1,24c5.5-8.1,13-15.3,22.4-21.5c9.4-6.2,20.6-9.3,33.5-9.3c9.8,0,18.9,1.2,27.3,3.6c8.4,2.4,15.5,6.2,21.5,11.5c6,5.3,10.6,12.1,14,20.6c3.3,8.5,5,18.7,5,30.7v124.1h-50.9V249.6c0-6.2-0.2-12.1-0.7-17.6c-0.5-5.5-1.8-10.3-3.9-14.3c-2.2-4.1-5.3-7.3-9.5-9.7c-4.2-2.4-9.9-3.6-17-3.6c-7.2,0-13,1.4-17.4,4.1c-4.4,2.8-7.9,6.3-10.4,10.8c-2.5,4.4-4.2,9.4-5,15.1c-0.8,5.6-1.3,11.3-1.3,17v103.3h-50.9v-104c0-5.5-0.1-10.9-0.4-16.3c-0.2-5.4-1.3-10.3-3.1-14.9c-1.8-4.5-4.8-8.2-9-10.9c-4.2-2.7-10.3-4.1-18.5-4.1c-2.4,0-5.6,0.5-9.5,1.6c-3.9,1.1-7.8,3.1-11.5,6.1c-3.7,3-6.9,7.3-9.5,12.9c-2.6,5.6-3.9,13-3.9,22.1v107.6h-50.9V169.2H166.3z"/><path d="M506.3,508.1V11.9h-35.7V0H520v520h-49.4v-11.9H506.3z"/></svg>
            Matrix
          </a>
          <!--
          <a target='_blank' href='https://adamharrison.github.io/lite-xl-web'>
          <svg version="1.1" style='top: 4px;' width="16" height="20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 58 58" style="enable-background:new 0 0 58 58;" xml:space="preserve"><path d="M50.688,48.222C55.232,43.101,58,36.369,58,29c0-7.667-2.996-14.643-7.872-19.834c0,0,0-0.001,0-0.001 c-0.004-0.006-0.01-0.008-0.013-0.013c-5.079-5.399-12.195-8.855-20.11-9.126l-0.001-0.001L29.439,0.01C29.293,0.005,29.147,0,29,0 s-0.293,0.005-0.439,0.01l-0.563,0.015l-0.001,0.001c-7.915,0.271-15.031,3.727-20.11,9.126c-0.004,0.005-0.01,0.007-0.013,0.013 c0,0,0,0.001-0.001,0.002C2.996,14.357,0,21.333,0,29c0,7.369,2.768,14.101,7.312,19.222c0.006,0.009,0.006,0.019,0.013,0.028 c0.018,0.025,0.044,0.037,0.063,0.06c5.106,5.708,12.432,9.385,20.608,9.665l0.001,0.001l0.563,0.015C28.707,57.995,28.853,58,29,58 s0.293-0.005,0.439-0.01l0.563-0.015l0.001-0.001c8.185-0.281,15.519-3.965,20.625-9.685c0.013-0.017,0.034-0.022,0.046-0.04 C50.682,48.241,50.682,48.231,50.688,48.222z M2.025,30h12.003c0.113,4.239,0.941,8.358,2.415,12.217 c-2.844,1.029-5.563,2.409-8.111,4.131C4.585,41.891,2.253,36.21,2.025,30z M8.878,11.023c2.488,1.618,5.137,2.914,7.9,3.882 C15.086,19.012,14.15,23.44,14.028,28H2.025C2.264,21.493,4.812,15.568,8.878,11.023z M55.975,28H43.972 c-0.122-4.56-1.058-8.988-2.75-13.095c2.763-0.968,5.412-2.264,7.9-3.882C53.188,15.568,55.736,21.493,55.975,28z M28,14.963 c-2.891-0.082-5.729-0.513-8.471-1.283C21.556,9.522,24.418,5.769,28,2.644V14.963z M28,16.963V28H16.028 c0.123-4.348,1.035-8.565,2.666-12.475C21.7,16.396,24.821,16.878,28,16.963z M30,16.963c3.179-0.085,6.3-0.566,9.307-1.438 c1.631,3.91,2.543,8.127,2.666,12.475H30V16.963z M30,14.963V2.644c3.582,3.125,6.444,6.878,8.471,11.036 C35.729,14.45,32.891,14.881,30,14.963z M40.409,13.072c-1.921-4.025-4.587-7.692-7.888-10.835 c5.856,0.766,11.125,3.414,15.183,7.318C45.4,11.017,42.956,12.193,40.409,13.072z M17.591,13.072 c-2.547-0.879-4.991-2.055-7.294-3.517c4.057-3.904,9.327-6.552,15.183-7.318C22.178,5.38,19.512,9.047,17.591,13.072z M16.028,30 H28v10.038c-3.307,0.088-6.547,0.604-9.661,1.541C16.932,37.924,16.141,34.019,16.028,30z M28,42.038v13.318 c-3.834-3.345-6.84-7.409-8.884-11.917C21.983,42.594,24.961,42.124,28,42.038z M30,55.356V42.038 c3.039,0.085,6.017,0.556,8.884,1.4C36.84,47.947,33.834,52.011,30,55.356z M30,40.038V30h11.972 c-0.113,4.019-0.904,7.924-2.312,11.58C36.547,40.642,33.307,40.126,30,40.038z M43.972,30h12.003 c-0.228,6.21-2.559,11.891-6.307,16.348c-2.548-1.722-5.267-3.102-8.111-4.131C43.032,38.358,43.859,34.239,43.972,30z  M9.691,47.846c2.366-1.572,4.885-2.836,7.517-3.781c1.945,4.36,4.737,8.333,8.271,11.698C19.328,54.958,13.823,52.078,9.691,47.846 z M32.521,55.763c3.534-3.364,6.326-7.337,8.271-11.698c2.632,0.945,5.15,2.209,7.517,3.781 C44.177,52.078,38.672,54.958,32.521,55.763z"/></svg>
            Try Live!
          </a>
          -->
        </box>
        <box>
          <h2>Status</h2>
          <a target='_blank' href='https://discord.gg/RWzqC3nx7K'><img src='https://img.shields.io/discord/847122429742809208?label=discord&logo=discord'/></a>
          <a target='_blank' href='https://repology.org/project/lite-xl/versions#align-right'><img style='width: 100%;' src='https://repology.org/badge/vertical-allrepos/lite-xl.svg'/></a>
        </box>
      </sidebar>
    </content>
  </body>
</html>
